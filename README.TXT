==============================================================================
      HISPAT:
      HISTORY.X をちょっとだけ Emacs系のキーバインドにするバイナリパッチ
==============================================================================

--------
はじめに
--------

 COMMAND.X の力強い相棒、HISTORY.X。 Human ver3.01 に付属のバージョン
(Ver1.10) になると、ファイル名補間、補間可能ファイル名一覧という便利な
機能が増えました。しかし、キーバインド変更は相変わらず出来ません。そこ
で、ものは試しと DIS ってみたところ、アセンブルし直せば割と簡単にキー
バインドが変更出来そうなのでやってみました。とりあえず、ダイヤモンド配
列のカーソル移動は好みじゃないので、Emacs系のキーバインド（というより、
UNIX 上の tcsh のキーバインド）のうち、普段良く使っている機能を中心に
キーを割り付けてみました。また、ファイル名補間も少しだけ私の好みに
合うように改造してあります。


------
使い方
------

 アーカイブに入っている HISTORY.BFD を BUP.X コマンドを用いてオリジナ
ルの HISTORY.X にパッチ当てして下さい。また、アーカイブに含まれる
KEY.HIS をオリジナルと差し替えることにより、従来どおりカーソル／ロール
アップ／ロールダウンも使用出来ます。

なお、パッチ対象となる HISTORY.X は Human ver3.01 に付属している

・HISTORY.X Ver1.10 (28382bytes,93-02-25 12:00:00)

です。3.01 以外のバージョンに付属する HISTORY.X にパッチがあたるかどう
かは確認していません。


--------------------------
設定されるキーバインド一覧
--------------------------

Version1.10+6でテンプレートの"N&CU"のバインドを"ESC+F"から"ESC+X"に変更しました。
同梱のKEY.HISでF9キーの設定も変更されます。

------------------------------------------------------------------------------
機能				オリジナル	パッチ済み
------------------------------------------------------------------------------
●カーソル移動系
一文字前進　　　　　CTRL+D　　　CTRL+F　(→キー)
一文字後退　　　　　CTRL+S　　　CTRL+B　(←キー)
一語前進　　　　　　CTRL+F　　　ESC+F　 (↑キー)
一語後退　　　　　　CTRL+A　　　ESC+B　 (↓キー)
行頭へジャンプ　　　CTRL+B　　　CTRL+A
行末へジャンプ　　　CTRL+B　　　CTRL+E
------------------------------------------------------------------------------
●文字消去系
一文字消去　　　　　CTRL+G　　　CTRL+D (注１)
バックスペース　　　CTRL+H　　　CTRL+H
行末まで消去　　　　CTRL+K　　　CTRL+K
一行消去　　　　　　ESC+E　　　 ESC+E,CTRL+U
一語削除　　　　　　CTRL+\　　　ESC+D,CTRL+\
左一語削除　　　　　CTRL+^　　　ESC-H,CTRL+^

注１）	Ver1.10+4 以降では一文字消去機能においてカーソル位置が行末で消
	去が出来ない場合、補間可能ファイル名一覧を表示します(tcsh の
	delete-character-or-list に似せたつもり）。
------------------------------------------------------------------------------
●ヒストリ操作系
ヒストリ次候補　　　CTRL+E　　　CTRL+N　(ROLL UPキー)
ヒストリ前候補　　　CTRL+W　　　CTRL+P	(ROLL DOWNキー)
ヒストリ一覧表示　　CTRL+L　　　CTRL+L
CD履歴表示　　　　　CTRL+_　　　CTRL+_

注２）	ヒストリ操作としてはこの他に、CD コマンド専用ヒストリ
	(CTRL+Q,CTRL+Y)、及び引き数に対するヒストリ
	(CTRL-R,CTRL-T)が存在しますが、割り当てを省略しています。
------------------------------------------------------------------------------
●その他の機能
ファイル名補間　　　CTRL+I,TAB　CTRL+I,TAB
補間可能ファイル名一覧表示　CTRL+X　　行末で CTRL+D
挿入／上書き切り替え　　　　CTRL+O　　CTRL+O
コントロールコード入力　　　CTRL+[,ESC　　CTRL+[,ESC,CTRL+Q
ヘルプ			　　CTRL+V,HELP	CTRL+V,HELP

注３）	ファイル名補間についてですが、ディレクトリ名を補間した場合はディ
	レクトリ名の後ろに '\' を、フィル名を補完した場合は" "が付加されるように
	改造してあります。
------------------------------------------------------------------------------


----------
テクニック
----------

●その１

CTRL+I(TAB) でディレクトリ名を補間して、さらにそのディレクトリ下のファイル
（ディレクトリ）を補間したい場合は

1) CTRL+I(TAB) によるディレクトリ名補間
	↓
2) 機能が未バインドのコントロールキー（例：CTRL+J）を入力
	↓
3) 再度 CTRL+I(TAB) を入力

と操作して下さい。CTRL+I を続けて入力すると、カレントディレクトリの候
補を順次表示するだけです。


●その２

ディレクトリ名を補間した後、補間したディレクトリ下の補間可能ファイル名
一覧を確認したい場合は、

1) CTRL+I によるディレクトリ名補間
	↓
2) 未バインドのコントロールコード（例：CTRL+J）を入力
	↓
3) CTRL+D による一覧表示

と操作して下さい。CTRL+I と CTRL+D を続けて入力しても補間したディレク
トリの次のエントリを表示するだけです。


--------
もろもろ
--------

無保証です。

本プログラムの著作権はオリジナル部分はSHARP/Hudsonにあります。
改変部分については特に権利を主張するつもりはありません。

---------------------
同梱のKEY.HISについて
---------------------
カーソルキー、ROLLUP/ROLLDOWNなどのキー割り当てを手直ししています。
KEY.X では CTRL+P/N はカーソルキーなどのファンクションキーには定義出来
ないようになっているのでDEDIT.X を使ってファイルに直接書き込んで作成
しています。

----
謝辞
----

本アーカイブは以下のツールなどを用いて作成されました、作者・移植者の方々に
感謝致します。

	MicroEMACS J1.43r3
	HAS.X	Ver2.35
	HLK.X	Ver2.27
	DIS.X	Ver2.01β
	DEDIT.X	Ver2.23
	BDIF.X	Ver1.1 rel.6

そして、Human Ver3 やオリジナルの HISTORY.X Ver1.10 を作成した 
SHARP/Hudson の開発の方々に感謝します。


----------------------------
バージョンアップ履歴
----------------------------

注）オリジナルのバージョンは HISTORY.X Ver1.10 です

● HISTORY.X Ver1.10+6
　テンプレートN&CU(F9キー)の割り当てをESC+FからESC+Xに変更しました
　ESC+F/ESC+B/ESC+D/ESC+Hに一語移動および一語削除を割り当てました
　同梱のKEY.HISを上記の変更に合わせて修正しました
　ファイル名を補完した際にファイル名の後ろに空白を追加するようにしました

● HISTORY.X Ver1.10+5
　VOID を CTRL+U にバインドした(UNIX の stty KILL '^U' が元ネタ)

● HISTORY.X Ver1.10+4
　一文字消去コマンド（CTRL+D にバインドされている）の機能を tcsh の
　 delete-character-or-list に似せてみました。カーソル位置が行末で
　消去文字がなかった場合は補間可能ファイル名一覧を表示します

● HISTORY.X Ver1.10+3
　行頭／行末へのジャンプがトグル動作だったものを分離して、それぞれの
　機能を CTRL+A,CTRL+E にバインドした

● HISTORY.X Ver1.10+2（非公開）
　ディレクトリ名補間時にディレクトリ名に '\' を付加するようにした

● HISTORY.X Ver1.10+1
　キーバインドを Emacs(and tcsh) モドキに変更した
